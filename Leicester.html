<html>
	<head>
		<!-- Important: Let the viewport cover the whole screen -->
		<meta name="viewport" content="target-densitydpi=device-dpi, width = 540, user-scalable = 0" />
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

		<!-- Include the ARchitect library -->
		<script src="architect://architect.js"></script>
		<!-- Include the ARchitect Desktop Engine for testing on a desktop browser-->
		<script type="text/javascript" src="../ade.js"></script>
		<!-- jQuery! -->
		<script src="jquery-1.11.2.min.js"></script>
		
		<style type="text/css">
			/* CSS Style for the message DIV that displays our message */
					.message { 
					border-radius: 2em;
					border: solid 1px #6d6d6d;
					background-color: rgba(255,255,255,0.5);
					color: black;
					text-align: center;
				   
					position:absolute;
					width: 100%;
					height: 10%;
					top: 0%;
					}
			}
		</style>

		<script type="text/javascript">		
			//Not Used, message div click function
			function messageClicked() {
				// set the message DIV text
				//document.getElementById("messageElement").innerHTML = "My text";	
			}
			
			AR.context.onLocationChanged = function(lat, lon, alt, acc) {
				// the current location's latitude, longitude, altitude and accuracy
				// are passed in by the ARchitect
				
				var curGeoLocation = new AR.GeoLocation(lat,lon,alt);
				
				// Create a new RelativeLocation 10 meters north of the current location.
				// RelativeLocations allow you to place objects relative to others.
				// In our case, relative to the current user location.
				//var myGeoLocation = new AR.RelativeLocation(null, 300, 0, 0);
				var myGeoLocation2 = new AR.RelativeLocation(null, 0, 500, 0);
				
				/*Set to location of highcross*/
				var castleLocation = new AR.GeoLocation(52.636397, -1.136720);
				var distToCastle = curGeoLocation.distanceTo(castleLocation);
				
				
				
				//Create image resource, points to our Image
				var imageres = new AR.ImageResource("/Images/castle.png");
				// Create an imagedrawable, using our image resource to point to our image
				var highCross = new AR.ImageDrawable(imageres, 5, {
				offsetX : 1,
				rotation : 0,
				onClick : function() {
					$(".message").show();
					document.getElementById("messageElement").innerHTML = distToCastle + " meters";
				}
				});
				
				// Create an orange circle with a radius of 5
				//var myCircle = new AR.Circle(4, {style: {fillColor: '#FFF000'}});
				var myCircle2 = new AR.Circle(2, 
				{style: {fillColor: '#AAA000'},
				onClick : function() {
					myCircle2.radius *= 2;
					}
				});
				
				// Create the GeoObject that puts it all together.
				// The GeoObject will be placed at the previously created GeoLocation and an orange Circle
				// will appear at that location. By creating the object it will be immediately visible.
				var myCastleObject = new AR.GeoObject(castleLocation, {
				drawables: {cam: highCross},
				});
				var myGeoObject2 = new AR.GeoObject(myGeoLocation2, {drawables: {cam: myCircle2}});
				
			}

		</script>

	</head>
	<body>
		<!--
		HTML Body will be displayed on top of the Augmented Reality view.
		A transparent background allows the AR content to be visible.
		-->

		<div id="messageElement" class="message" style="display:none">
				Distance
		</div>

	</body>
</html>
